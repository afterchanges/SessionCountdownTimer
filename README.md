# Session Countdown Timer для IDE от JetBrains

#### Плагин позволяет установить таймер обратного отсчёта рабочего сеанса с возможностью паузы и настройки времени. Таймер отображается в нижнем статус-баре интерфейса IDE.

## Архитектура

### Основные компоненты:

- **SessionCountdownWidget.kt** – основной виджет плагина:

  - Реализует `StatusBarWidget` и `StatusBarWidgetFactory` для интеграции в строку состояния.

  - Показывает таймер обратного отсчёта в формате `MM:SS` (⏳ или ⏸).

  - Обновляется каждую секунду с помощью `ScheduledExecutorService`.

  - Обрабатывает пользовательские действия:
    - Левый клик – открывает меню с двумя опциями: "Пауза/Возобновление" и "Установить время".
    - Ввод времени через всплывающее диалоговое окно.

  - При завершении таймера отображает сообщение в центре экрана.

- **SessionCountdownWidgetFactory.kt** – фабрика виджетов:

  - Использует `StatusBarWidgetFactory` для создания и управления виджетом.

  - Устанавливает виджет в строку состояния при запуске IDE.

## Взаимодействие компонентов:

1. **SessionCountdownWidget**:
  - Управляет логикой таймера (пауза, возобновление, установка нового времени).
  - Обновляет текст в строке состояния каждую секунду.
  - При завершении таймера вызывает метод для показа уведомления.

2. **SessionCountdownWidgetFactory**:
  - Регистрирует виджет в статусной строке.

3. **User Actions**:
  - **Левый клик**: вызывает меню с выбором опций:
    - **Пауза/Возобновление**: приостанавливает или запускает таймер.
    - **Установить время**: открывает диалоговое окно для ввода нового времени сеанса.
  - **Таймер завершён**: показывает уведомление в центре экрана.

## Формат отображения времени:

- **MM:SS** – если длительность таймера менее часа.
- **HH:MM:SS** – если длительность таймера превышает час.

Пример отображения:  
⏳ `25:00` – таймер работает.  
⏸ `10:15` – таймер на паузе.

## Примечание:

- Поддерживается с билдов 220 и выше платформы IntelliJ.
-  Протестировано на IntelliJ IDEA Community 2023.2.
-  Работает на всех IDE, основанных на платформе IntelliJ (PyCharm, WebStorm, CLion и т.д.).

## Сборка и интеграция:

1. **Проверка конфигурации проекта**:
  - Убедитесь, что установлены корректные версии JVM (17+), Gradle и IntelliJ IDEA SDK.

2. **Сборка плагина**:
    ```bash
    ./gradlew clean buildPlugin
    ```
   После успешной сборки файл плагина будет находиться в директории `build/distributions/` с именем:
    ```
    session-countdown-timer-1.0-SNAPSHOT.zip
    ```

3. **Установка плагина в IDE**:
  - Откройте **Settings → Plugins**.
  - Нажмите на иконку шестерёнки в правом верхнем углу окна.
  - Выберите **Install Plugin from Disk...**.
  - Укажите путь к файлу `session-countdown-timer-1.0-SNAPSHOT.zip`.
  - Перезапустите IDE для применения изменений.

## Использование:

- Таймер автоматически появляется в **статусной строке**.
- **Левый клик** на таймер:
  - Вызывает меню с опциями: **Пауза/Возобновление** и **Установить время**.
- **Ввод времени**:
  - В окне "Set Timer" введите количество минут для нового сеанса.
- **Завершение таймера**:
  - Появляется уведомление в центре экрана с предложением сделать перерыв или начать новый сеанс.

---
